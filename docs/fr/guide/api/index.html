
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="The Open Conversation Kit">
      
      
        <link rel="canonical" href="https://theopenconversationkit.github.io/tock/fr/guide/api/">
      
      
        <meta name="author" content="Tock">
      
      <link rel="shortcut icon" href="../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.2">
    
    
      
        <title>Programmer des parcours - Tock</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.19190aaf.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.24b84193.min.css">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#programmer-des-parcours-en-kotlin" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://theopenconversationkit.github.io/tock/fr" title="Tock" class="md-header-nav__button md-logo" aria-label="Tock">
      
  <img src="../../assets/images/logo-white.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Tock
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Programmer des parcours
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/theopenconversationkit/tock" title="Aller au dépôt" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    tock
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://theopenconversationkit.github.io/tock/fr" title="Tock" class="md-nav__button md-logo" aria-label="Tock">
      
  <img src="../../assets/images/logo-white.png" alt="logo">

    </a>
    Tock
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/theopenconversationkit/tock" title="Aller au dépôt" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    tock
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." class="md-nav__link">
      Accueil
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../toc/" class="md-nav__link">
      Table des matières
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Découvrir Tock
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Découvrir Tock" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Découvrir Tock
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../studio/" class="md-nav__link">
      Créer son premier bot
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../slack/" class="md-nav__link">
      Configurer Slack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../messenger/" class="md-nav__link">
      Configurer Messenger
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Programmer des parcours
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Programmer des parcours
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ce-que-vous-allez-creer" class="md-nav__link">
    Ce que vous allez créer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-requis" class="md-nav__link">
    Pré-requis
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creer-un-programme-kotlin-avec-la-dependance-tock" class="md-nav__link">
    Créer un programme Kotlin avec la dépendance Tock
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creer-une-fonction-qui-se-connecte-a-tock" class="md-nav__link">
    Créer une fonction qui se connecte à Tock
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#terminer-la-configuration-dans-tock-studio" class="md-nav__link">
    Terminer la configuration dans Tock Studio
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#felicitations" class="md-nav__link">
    Félicitations!
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#continuer" class="md-nav__link">
    Continuer...
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../plateforme/" class="md-nav__link">
      Déployer avec Docker
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Utiliser Tock
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Utiliser Tock" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Utiliser Tock
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/concepts/" class="md-nav__link">
      Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Tock Studio
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Tock Studio" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        <span class="md-nav__icon md-icon"></span>
        Tock Studio
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/studio/" class="md-nav__link">
      Présentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/studio/general/" class="md-nav__link">
      Interface générale
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/studio/nlu/" class="md-nav__link">
      Le menu Language
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/studio/stories-and-answers/" class="md-nav__link">
      Le menu Stories
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/studio/test/" class="md-nav__link">
      Le menu Test
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/studio/analytics/" class="md-nav__link">
      Le menu Analytics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/studio/nlu-qa/" class="md-nav__link">
      Le menu Quality
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/studio/configuration/" class="md-nav__link">
      Le menu Settings
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Guides
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Guides" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        <span class="md-nav__icon md-icon"></span>
        Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/guides/build-model/" class="md-nav__link">
      Construire un modèle conversationnel
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/guides/canaux/" class="md-nav__link">
      Bot multicanal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/guides/i18n/" class="md-nav__link">
      Bot multilingue
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Développer avec Tock
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Développer avec Tock" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Développer avec Tock
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev/modes/" class="md-nav__link">
      Modes disponibles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev/bot-api/" class="md-nav__link">
      Tock Bot API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev/bot-integre/" class="md-nav__link">
      Tock Bot intégré
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev/tester/" class="md-nav__link">
      Tester le mode intégré
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev/connecteurs/" class="md-nav__link">
      Connecteurs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev/i18n/" class="md-nav__link">
      i18n
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev/api/" class="md-nav__link">
      Liste des APIs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev/exemples-code/" class="md-nav__link">
      Exemples de code
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Administrer Tock
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Administrer Tock" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        Administrer Tock
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/architecture/" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/installation/" class="md-nav__link">
      Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/securite/" class="md-nav__link">
      Sécurité
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/disponibilite/" class="md-nav__link">
      Disponibilité
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/supervision/" class="md-nav__link">
      Supervision
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/cloud/" class="md-nav__link">
      Cloud
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      A propos
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="A propos" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        A propos
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../apropos/pourquoi/" class="md-nav__link">
      Pourquoi Tock
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apropos/vitrine/" class="md-nav__link">
      Vitrine utilisateurs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apropos/recompenses/" class="md-nav__link">
      Prix et récompenses
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apropos/ressources/" class="md-nav__link">
      Ressources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apropos/contact/" class="md-nav__link">
      Nous contacter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apropos/communaute/" class="md-nav__link">
      Communauté
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apropos/contribuer/" class="md-nav__link">
      Contribuer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apropos/emploi/" class="md-nav__link">
      Emploi
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://theopenconversationkit.github.io/tock/en/" class="md-nav__link">
      🇫🇷 🇬🇧
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://theopenconversationkit.github.io/tock/fr-dark/" class="md-nav__link">
      Mode sombre
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://doc.tock.ai" class="md-nav__link">
      Tock.ai 🔗
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ce-que-vous-allez-creer" class="md-nav__link">
    Ce que vous allez créer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-requis" class="md-nav__link">
    Pré-requis
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creer-un-programme-kotlin-avec-la-dependance-tock" class="md-nav__link">
    Créer un programme Kotlin avec la dépendance Tock
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creer-une-fonction-qui-se-connecte-a-tock" class="md-nav__link">
    Créer une fonction qui se connecte à Tock
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#terminer-la-configuration-dans-tock-studio" class="md-nav__link">
    Terminer la configuration dans Tock Studio
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#felicitations" class="md-nav__link">
    Félicitations!
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#continuer" class="md-nav__link">
    Continuer...
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="programmer-des-parcours-en-kotlin">Programmer des parcours en Kotlin<a class="headerlink" href="#programmer-des-parcours-en-kotlin" title="Permanent link">&para;</a></h1>
<p>Les interfaces <em>Tock Studio</em> permettent de créer des bots et des parcours relativement simples, comme 
des <em>arbres de décision</em> et des réponses à des questions courantes. Cela s'avère suffisant pour de nombreux cas 
d'usages conversationnels.</p>
<p>Toutefois, il est possible de construire des réponses et des parcours plus complexes :</p>
<ul>
<li>
<p>Se brancher à un compte utilisateur</p>
</li>
<li>
<p>Aggréger les informations de référentiels métier</p>
</li>
<li>
<p>Appeler les services du <em>SI (Système d'Information)</em> dans une organisation</p>
</li>
<li>
<p>Intégrer des API externes pour enrichir ses parcours de services tiers</p>
</li>
<li>
<p>Effectuer des actions et des <em>transactions</em> : création de tickets, paiements, etc.</p>
</li>
<li>
<p>Implémenter des règles de gestion et comportements spécifiques</p>
</li>
<li>
<p>Optimiser les enchaînements entre les intentions</p>
</li>
</ul>
<p>Pour construire des parcours complexes, <em>Tock</em> propose plusieurs modes d'intégration destinés à 
 différents langages et frameworks de développement.</p>
<p>Dans ce guide, vous utiliserez le langage <a href="https://kotlinlang.org/">Kotlin</a> et le mode 
  <em>WebSocket</em> pour ajouter une intention à un bot initié dans <em>Tock Studio</em>.</p>
<p>Si vous le souhaitez, vous pouvez sauter cette étape et <a href="../plateforme/">déployer un plateforme avec Docker</a> 
ou passer directement au <a href="../../toc/">manuel utilisateur</a> pour en savoir plus sur les possibilités de <em>Tock Studio</em>.</p>
<h2 id="ce-que-vous-allez-creer">Ce que vous allez créer<a class="headerlink" href="#ce-que-vous-allez-creer" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>Une <em>intention</em> Tock développée avec le langage <a href="https://kotlinlang.org/">Kotlin</a></p>
</li>
<li>
<p>Un programme se connectant au bot en <em>WebSocket</em> pour l'enrichir de parcours programmés</p>
</li>
</ul>
<h2 id="pre-requis">Pré-requis<a class="headerlink" href="#pre-requis" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>Environ 10 minutes</p>
</li>
<li>
<p>Un bot Tock fonctionnel (par exemple suite au guide <a href="../studio/">premier bot Tock</a>)</p>
</li>
<li>
<p>Un environnement de développement (ou <em>IDE</em>) supportant <a href="https://kotlinlang.org/">Kotlin</a>, par exemple 
<a href="https://www.jetbrains.com/idea/">IntelliJ</a> avec des versions récentes du <a href="https://jdk.java.net/">JDK</a> 
et de <a href="https://maven.apache.org/">Maven</a></p>
</li>
</ul>
<blockquote>
<p>Si vous ne souhaitez pas utiliser d'<em>IDE</em>, ou Maven, pas de problème. Il est tout à fait possible de réaliser le même 
exercice avec d'autres outils.</p>
<p>Il est également possible d'utiliser d'autres manières de développer que le mode <em>WebSocket</em> et d'autres 
langages que Kotlin. Vous en apprendrez plus dans le <a href="../../toc/">manuel utilisateur Tock</a>.</p>
</blockquote>
<h2 id="creer-un-programme-kotlin-avec-la-dependance-tock">Créer un programme Kotlin avec la dépendance Tock<a class="headerlink" href="#creer-un-programme-kotlin-avec-la-dependance-tock" title="Permanent link">&para;</a></h2>
<p>Il existe de nombreuses manières de créer un projet en Kotlin.</p>
<p>Ajoutez au <em>classpath</em> la bibliothèque <code>tock-bot-api-websocket</code> pour le mode <em>WebSocket</em>.</p>
<p>Si vous utilisez <a href="https://maven.apache.org/">Apache Maven</a>, voici un exemple de <em>POM</em> (<code>pom.xml</code>) pour Kotlin avec 
la dépendance <code>tock-bot-api-websocket</code> incluse :</p>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>

    <span class="nt">&lt;groupId&gt;</span>test<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>tock-kotlin-websocket<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="nt">&lt;/version&gt;</span>

    <span class="nt">&lt;properties&gt;</span>
        <span class="nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.build.sourceEncoding&gt;</span>
        <span class="nt">&lt;plugin.kotlin.version&gt;</span>1.3.41<span class="nt">&lt;/plugin.kotlin.version&gt;</span>
        <span class="nt">&lt;plugin.source.version&gt;</span>3.1.0<span class="nt">&lt;/plugin.source.version&gt;</span>
        <span class="nt">&lt;lib.tock.version&gt;</span>20.9.1<span class="nt">&lt;/lib.tock.version&gt;</span>
    <span class="nt">&lt;/properties&gt;</span>

    <span class="nt">&lt;dependencies&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>ai.tock<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>tock-bot-api-websocket<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>${lib.tock.version}<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>

    <span class="nt">&lt;build&gt;</span>
        <span class="nt">&lt;sourceDirectory&gt;</span>${project.basedir}/src/main/kotlin<span class="nt">&lt;/sourceDirectory&gt;</span>
        <span class="nt">&lt;plugins&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
                <span class="nt">&lt;groupId&gt;</span>org.jetbrains.kotlin<span class="nt">&lt;/groupId&gt;</span>
                <span class="nt">&lt;artifactId&gt;</span>kotlin-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
                <span class="nt">&lt;version&gt;</span>${plugin.kotlin.version}<span class="nt">&lt;/version&gt;</span>
                <span class="nt">&lt;executions&gt;</span>
                    <span class="nt">&lt;execution&gt;</span>
                        <span class="nt">&lt;id&gt;</span>compile<span class="nt">&lt;/id&gt;</span>
                        <span class="nt">&lt;phase&gt;</span>compile<span class="nt">&lt;/phase&gt;</span>
                        <span class="nt">&lt;goals&gt;</span>
                            <span class="nt">&lt;goal&gt;</span>compile<span class="nt">&lt;/goal&gt;</span>
                        <span class="nt">&lt;/goals&gt;</span>
                    <span class="nt">&lt;/execution&gt;</span>
                    <span class="nt">&lt;execution&gt;</span>
                        <span class="nt">&lt;id&gt;</span>test-compile<span class="nt">&lt;/id&gt;</span>
                        <span class="nt">&lt;phase&gt;</span>test-compile<span class="nt">&lt;/phase&gt;</span>
                        <span class="nt">&lt;goals&gt;</span>
                            <span class="nt">&lt;goal&gt;</span>test-compile<span class="nt">&lt;/goal&gt;</span>
                        <span class="nt">&lt;/goals&gt;</span>
                    <span class="nt">&lt;/execution&gt;</span>
                <span class="nt">&lt;/executions&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
                <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
                <span class="nt">&lt;artifactId&gt;</span>maven-source-plugin<span class="nt">&lt;/artifactId&gt;</span>
                <span class="nt">&lt;version&gt;</span>${plugin.source.version}<span class="nt">&lt;/version&gt;</span>
                <span class="nt">&lt;executions&gt;</span>
                    <span class="nt">&lt;execution&gt;</span>
                        <span class="nt">&lt;id&gt;</span>attach-sources<span class="nt">&lt;/id&gt;</span>
                        <span class="nt">&lt;phase&gt;</span>verify<span class="nt">&lt;/phase&gt;</span>
                        <span class="nt">&lt;goals&gt;</span>
                            <span class="nt">&lt;goal&gt;</span>jar-no-fork<span class="nt">&lt;/goal&gt;</span>
                        <span class="nt">&lt;/goals&gt;</span>
                    <span class="nt">&lt;/execution&gt;</span>
                <span class="nt">&lt;/executions&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;/plugins&gt;</span>
    <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</code></pre></div>


<blockquote>
<p>Vous pouvez retrouver ce code et d'autres exemples dans le dépôt <a href="https://github.com/theopenconversationkit/tock-bot-samples">tock-bot-samples</a>.</p>
</blockquote>
<h2 id="creer-une-fonction-qui-se-connecte-a-tock">Créer une fonction qui se connecte à Tock<a class="headerlink" href="#creer-une-fonction-qui-se-connecte-a-tock" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>Créez un fichier Kotlin (par exemple dans `src/main/kotlin/StartWebSocket.kt)</p>
</li>
<li>
<p>Editez-le avec le code suivant :</p>
</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="k">import</span> <span class="nn">ai.tock.bot.api.client.newBot</span>
<span class="k">import</span> <span class="nn">ai.tock.bot.api.client.newStory</span>
<span class="k">import</span> <span class="nn">ai.tock.bot.api.websocket.startWithDemo</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">startWithDemo</span><span class="p">(</span> <span class="c1">// Integrate with the Tock demo platform by default</span>
        <span class="n">newBot</span><span class="p">(</span>
            <span class="s">&quot;PUT-YOUR-TOCK-APP-API-KEY-HERE&quot;</span><span class="p">,</span> <span class="c1">// Get your app API key from Bot Configurations in Tock Studio</span>
            <span class="n">newStory</span><span class="p">(</span><span class="s">&quot;qui-es-tu&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// Answer for the &#39;qui-es-tu&#39; story</span>
                <span class="n">send</span><span class="p">(</span><span class="s">&quot;Je suis un assistant conversationnel construit avec Tock&quot;</span><span class="p">)</span>
                <span class="n">end</span><span class="p">(</span><span class="s">&quot;Comment puis-je aider ?&quot;</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="p">}</span>
</code></pre></div>


<blockquote>
<p>Vous pouvez retrouver ce code (et d'autres exemples) dans le dépôt <a href="https://github.com/theopenconversationkit/tock-bot-samples">tock-bot-samples</a>.</p>
</blockquote>
<ul>
<li>
<p>Remplacez la clef d'API par celle de votre propre application Tock. Pour cela, dans <em>Tock Studio</em>, 
allez dans <em>Configuration</em> &gt; <em>Bot Configurations</em> et reportez la valeur <em>API Key</em> dans le code.</p>
</li>
<li>
<p>Exécutez la fonction (<em>main</em>) dans votre environnement de développement. Vous devriez voir apparaître une ligne 
de log ressemblant à celle-ci :</p>
</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">main</span><span class="o">]</span><span class="w"> </span><span class="n">INFO</span><span class="w">  </span><span class="n">ai</span><span class="p">.</span><span class="n">tock</span><span class="p">.</span><span class="n">bot</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">websocket</span><span class="p">.</span><span class="n">BotApiWebSocketClient</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">start</span><span class="w"> </span><span class="n">web</span><span class="w"> </span><span class="n">socket</span><span class="w"> </span><span class="nl">client</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="p">...</span><span class="err">}</span><span class="w"></span>
</code></pre></div>


<blockquote>
<p>Vérifiez éventuellement que d'autres logs provenant de <code>BotApiWebSocketClient</code> n'indiquent pas d'erreur. Si c'est le cas,
il peut s'agir d'une erreur de configuration de la clef d'API.</p>
</blockquote>
<h2 id="terminer-la-configuration-dans-tock-studio">Terminer la configuration dans <em>Tock Studio</em><a class="headerlink" href="#terminer-la-configuration-dans-tock-studio" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>Retournez dans Tock et allez dans <em>Stories &amp; Answers</em> &gt; <em>Stories</em></p>
</li>
<li>
<p>Décochez l'option <em>Only Configured Stories</em>. Vous voyez alors tous parcours, y compris "qui-es-tu" que vous venez de 
déclarer programmatiquement</p>
</li>
<li>
<p>Allez dans <em>Test</em> &gt; <em>Test the Bot</em> et saisissez une ou plusieurs phrases comme "qui es-tu ?" par exemple.
Vous contastez que le bot ne répond pas encore à cette question - il répond peut-être même à une autre 
intention. Il reste en effet une configuration à effectuer pour que la <em>qualification</em> fonctionne.</p>
</li>
</ul>
<p>A ce stade, le parcours existe bien dans Tock, mais l'<em>intention</em> n'a pas été créée automatiquement.
Vous pouvez le vérifier en regardant la liste des intentions disponibles dans <em>Language Understanding</em> &gt; <em>Intents</em> &gt; <em>build</em> 
(la catégorie par défaut).</p>
<blockquote>
<p>Ce point sera bientôt amélioré (<a href="https://github.com/theopenconversationkit/tock/issues/533">issue #533</a>).</p>
</blockquote>
<ul>
<li>
<p>Allez dans <em>Language Understanding</em> &gt; <em>Inbox</em>, pour la dernière phrase que vous venez de saisir :</p>
<ul>
<li>
<p>Changez l'intention pour <em>New intent</em></p>
</li>
<li>
<p>Nommez-la "qui-es-tu" comme dans le code (pour que le lien se fasse)</p>
</li>
<li>
<p>Créez l'intention avec <em>Create</em></p>
</li>
<li>
<p>Puis terminez la qualification de la phrase avec <em>Validate</em></p>
</li>
</ul>
</li>
<li>
<p>Si vous avez saisi d'autres phrases pour cette intention, pour chacune d'elles sélectionnez l'intention dans la 
liste puis confirmez avec <em>Validate</em></p>
</li>
<li>
<p>Retournez dans <em>Test</em> &gt; <em>Test the Bot</em>. Si vous reposez la question, le bot vous donne désormais la réponse 
construite dans le code Kotlin (ie. "Je suis un assistant...").</p>
</li>
</ul>
<h2 id="felicitations">Félicitations!<a class="headerlink" href="#felicitations" title="Permanent link">&para;</a></h2>
<p>Vous venez de configurer votre première <em>story</em> programmatique en Kotlin.</p>
<p>De cette manière, vous pouvez tirer pleinement parti des possibilités d'un langage de programmation pour 
construire toutes sortes de parcours simples et complexes, interroger des API tierces, implémenter des 
 règles de gestion, etc.</p>
<blockquote>
<p>Si vous programmez ainsi une <em>story</em> déjà définie dans <em>Tock Studio</em>, c'est la définition présente dans <em>Tock Studio</em> 
qui est utilisée pour construire les réponses à l'exécution.</p>
</blockquote>
<h2 id="continuer">Continuer...<a class="headerlink" href="#continuer" title="Permanent link">&para;</a></h2>
<p>Dans la section suivante vous apprendez à :</p>
<ul>
<li><a href="../plateforme/">Déployer une plateforme Tock</a> en quelques minutes avec Docker</li>
</ul>
<p>Pour en savoir plus sur l'utilisation de <em>Tock Bot API</em> en mode <em>WebSocket</em>, mais aussi les autres 
modes de déploiement, les types de messages supportés par Tock, etc. vous pouvez consulter le
 <a href="../../toc/">manuel utilisateur</a>.</p>
                
                  
                    

<hr>
<div class="md-source-date">
  <small>
    
      Dernière mise à jour: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2 novembre 2020</span>
    
  </small>
</div>
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../messenger/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Précédent
                </span>
                Configurer Messenger
              </div>
            </div>
          </a>
        
        
          <a href="../plateforme/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Suivant
                </span>
                Déployer avec Docker
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017/2020 Tock
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.7e0ee788.min.js"></script>
      <script src="../../assets/javascripts/bundle.c1ccee15.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copier dans le presse-papier", "clipboard.copied": "Copi\u00e9 dans le presse-papier", "search.config.lang": "fr", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Rechercher", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: ['tabs', 'instant'],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>